(()=>{var i=class{constructor(){this._subscribers=[]}subscribe(t){this._subscribers.push(t)}publish(...t){for(let r of this._subscribers)r(...t)}};function a(){return new Subscriber}var n=class extends i{constructor(t=[]){super(),this._internal=[];for(let r of t)this.push(r)}_makeSubscriberFunc(t){return(r,s=null)=>{this.publish(r,s?`${t}.${s}`:`${t}`)}}_makeAndSubscribe(t,r){let s=c(t);return s.subscribe(this._makeSubscriberFunc(r)),s}static(){return this._internal.map(t=>t.static())}set(t){this._internal.length=0;for(let r of t)this.publish(r)}push(t){let r=this._internal.length,s=this._makeAndSubscribe(t,r);this._internal.push(s),this.publish(t,`${r}`)}};function f(e){return new n(e)}var o=class extends i{constructor(t={}){super(),this._internal={};for(let r in t)this.set(r,t[r])}_makeSubscriberFunc(t){return(r,s=null)=>{this.publish(r,s?`${t}.${s}`:t)}}_makeAndSubscribe(t,r){let s=c(t);return s.subscribe(this._makeSubscriberFunc(r)),s}static(){let t={};for(let r in this._internal)t[r]=this._internal[r].static()}set(t,r){if(r===void 0){for(let s in this._internal)delete this._internal[s];for(let s in t)this.set(s,t[s])}else if(this._internal[t]!==void 0)this._internal[t].set(r);else{let s=this._makeAndSubscribe(r,t);this._internal[t]=s,this.publish(r,t)}}key(t){return this._internal[t]}};function h(e){return new o(e)}function c(e){return typeof e=="object"?Array.isArray(e)?new n(e):new o(e):new u(e)}var u=class extends i{constructor(t){super(),this._value=t}get(){return this._value}set(t){this._value=t,this.publish(this._value)}static(){return this._value}};function b(e){return new u(e)}})();
//# sourceMappingURL=index.js.map
